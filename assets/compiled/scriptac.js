$(document).ready(function(){$("#room_count").change(function(){var new_room_count=parseInt($(this).val());if(new_room_count>=1&&new_room_count<=4)renderRoomBlock(new_room_count)})})
function countOccupancies(){var rooms=0,adults=0,child=0;$("#rooms-repeat-block").find('[id^="room-"]:visible').each(function(){var roomId=$(this).attr('id').split('-')[1];adults+=parseInt($("#adults-"+roomId).val());child+=parseInt($("#children-"+roomId).val())});rooms=parseInt($("#room_count").val());$("#occ-room-count").text(rooms);$("#occ-adult-count").text(adults);$("#occ-child-count").text(child);$("#checkout-date-txt-block").toggleClass('hide',child===0)}
function renderRoomBlock(roomsSelected){var source=$("#room-repeat-template").html(),template=Handlebars.compile(source),roomsDisplayed=$("#rooms-repeat-block").find('[id^="room-"]:visible').length,roomsRendered=$("#rooms-repeat-block").find('[id^="room-"]').length;if(roomsSelected>roomsDisplayed){for(var i=1;i<=roomsSelected;i++){var r=$('#room-'+i);if(r.length==0){var html=template({roomNumber:i});$('#rooms-repeat-block').append(html);roomsRendered+=1}else $(r).show()}}else for(var i=++roomsSelected;i<=roomsRendered;i++)$('#room-'+i).hide();countOccupancies()}
function renderAgeDropdown(that,roomId){var source=$("#child-age-repeat-template").html(),template=Handlebars.compile(source),childSelected=$(that).val(),childDisplayed=$('[id^="child-'+roomId+'-"]:visible').length,childRendered=$("#rooms-repeat-block").find('[id^="room-'+roomId+'"]').find('[id^="child-"]').length;if(childSelected>childDisplayed){for(var i=1;i<=childSelected;i++){var ch=$('#child-'+roomId+'-'+i);if(ch.length==0){var html=template({roomNumber:roomId,childNumber:i});$('#child-age-block-'+roomId).append(html);childRendered+=1}else $(ch).show()}}else for(var i=++childSelected;i<=childRendered;i++)$('#child-'+roomId+'-'+i).hide();countOccupancies()}