<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Cms_Model extends CI_Model {    public function __construct() {        parent::__construct();    }    public function getcms($id) {        $query = $this->db->select('*')->from('cms')->where('type', $id)->get();        if ($query->num_rows()> 0) {            return $query->row();        } else {            return false;        }    }  public function getblogs($id) {        $query = $this->db->select('*')->from('cms')->where('type', $id)->get();        if ($query->num_rows()> 0) {            return $query->row();        } else {            return false;        }    }    public function getcms_test() {        $this->db->select('*');        $this->db->from('cms');        $this->db->where('type', '9');        $q = $this->db->get();        return $q->result();    }    public function getcms_reviews() {        $this->db->select('*');        $this->db->from('cms');        $this->db->where('type', '15');        $q = $this->db->get();        return $q->result();    }    public function getcms_feedback() {        $this->db->select('*');        $this->db->from('cms');        $this->db->where('type', '10');        $q = $this->db->get();        return $q->result();    }    public function updatecms($content, $type) {// print_r($type);exit;        $query = $this->db->select('*')->from('cms')->where('type', $type)->get();        // echo $this->db->last_query();exit;        if ($query->num_rows() > 0) {             $updadata = array('content' => $content);            $this->db->where('type', $type);            $this->db->update('cms', $updadata);        } else {             $insertdata = array('type' => $type, 'content' => $content);            $this->db->insert('cms', $insertdata);        }        return;    }    public function get_banner_images() {        $this->db->select('*')                ->from('banner_images');        $query = $this->db->get();        if ($query->num_rows()> 0) {            return $query->result();        }        return false;    }    public function update_status($img_id, $status) {        $data['status'] = $status;        $where = "image_id = '$img_id'";        if ($this->db->update('banner_images', $data, $where)) {            return true;        } else {            return false;        }    }    public function add_image($image_path) {        // echo 'errere'.$image_path1; exit;        $data = array(//            'image_name' => $name,            'image_path' => $image_path,            'status' => 0        );        if ($this->db->insert('banner_images', $data)) {            return true;        } else {            return false;        }    }    public function addcmstest($test, $img,$author) {        $insertdata = array('type' => '9', 'content' => $test, 'profile_img' => $img, 'Author' => $author);        $this->db->insert('cms', $insertdata);        return;    }	public function addcmsfeedback($test,$author) {        $insertdata = array('type' => '10', 'content' => $test,'Author' => $author);        $this->db->insert('cms', $insertdata);        return;    }    public function edit_blogs_test($id) {        $this->db->select('*');        $this->db->from('cms');        $this->db->where('cms_id', $id);        $this->db->where('type', '11');        $q = $this->db->get();        return $q->row();    }	//tes public function edit_cms_test($id) {        $this->db->select('*');        $this->db->from('cms');        $this->db->where('cms_id', $id);        $this->db->where('type', '9');        $q = $this->db->get();        return $q->row();    }    public function updatecmstest($id, $content,$author, $thumbfileTime) {        $data = array(            'content' => $content,			'Author' =>$author,            'profile_img' => $thumbfileTime        );        $this->db->where('cms_id', $id);        $this->db->update('cms', $data);        //  echo $this->db->last_query();exit;        return true;    }    public function del_cms_test($id) {        $this->db->where('cms_id', $id);        $this->db->delete('cms');        return true;    }    public function get_banner_img_by_id($id) {        $this->db->select('*');        $this->db->from('banner_images');        $query = $this->db->get();        if ($query->num_rows() > 0) {            return $query->row();        } else {            return '';        }    }    public function update_img($image,$id){        $data=array(            'image_path'=>$image,        );        $this->db->where('image_id',$id);        $this->db->update('banner_images',$data);        return true;    }    public function get_notice(){        $this->db->select('*');        $this->db->from('notice_board');        $query=$this->db->get();          if ($query->num_rows()> 0) {            return $query->result();        } else {            return '';        }    }    public function get_active_agents(){        $this->db->select('*');        $this->db->from('agent_info');        $this->db->where('status',1);        $query=$this->db->get();          if ($query->num_rows()> 0) {            return $query->result();        } else {            return '';        }    }    public function delete_notice(){        $this->db->truncate('notice_board');    }    public function delete_by_agent($agent_no){        $this->db->where('agent_no',$agent_no);        $this->db->delete('notice_board');    }    public function add_notice($agent_no,$msg){        $data=array(            'agent_no'=>$agent_no,            'notice_msg'=>$msg,            'status'=>1        );        $this->db->insert('notice_board',$data);        return true;    }    public function update_notice_status($agent_no,$status){        $data=array(            'status'=>$status,        );        $this->db->where('agent_no',$agent_no);        $this->db->update('notice_board',$data);        return true;    } public function manage_review_status($user_id,$status)   {		$data['status'] = $status;		$where = "cms_id = '$user_id'";		if($this->db->update('cms', $data, $where))		{			return true;		}		else		{			return false;		}   }     public function get_all_city_list($search) {        $where = "city_name LIKE '%" . $search . "%'";        $this->db->select('*');        $this->db->from('ace_jac_roomsxml_gta_city');        $this->db->where($where);        $this->db->where('status',1);        $this->db->order_by('city_name');        $query = $this->db->get();//echo $this->db->last_query();        if ($query->num_rows()== '') {            return '';        } else {            return $query->result_array();        }    } public function get_all_city_list_new($search,$hotel_name) {        $where .= "city_name LIKE '%" . $hotel_name . "%' AND ";         $where .=  "`hotel_name` LIKE '%" . $search . "%'";        $this->db->select('*');        $this->db->from('api_permanent_hotels');        $this->db->where($where);        //$this->db->where('status',1);        $this->db->order_by('city_name');        $query = $this->db->get();//echo $this->db->last_query();        if ($query->num_rows()== '') {            return '';        } else {            return $query->result_array();        }    }    public function update_all_city_list_new($data) {        $this->db->where('api_hotel_id',$data['api_hotel_id']);       // $this->db->where('hotel_name',$data['hotel_name']);        $value=array(            'hotel_name'=>$data['hotel_name']        );        $this->db->update('api_permanent_hotels',$value);        redirect("cms/edit_hotels","refresh");    }    public function get_matching_hotel($hotel_name){        $this->db->select('*');        $this->db->from('api_permanent_hotels');        $this->db->like('hotel_name',$hotel_name);        $query=$this->db->get();         if ($query->num_rows()== '') {            return '';        } else {            return $query->result();        }    }    function add_notification($data){        $this->db->insert('Notification',$data);        return true;    }    public function get_notification(){        $this->db->select('*');        $this->db->from('notification');        $query=$this->db->get();          if ($query->num_rows()> 0) {            return $query->result();        } else {            return '';        }}    public function delete_notification($id) {        $this->db->where('id', $id);        $this->db->delete('Notification');        return true;    }}