<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Cities_model extends CI_Model {    public function __construct() {        parent::__construct();    } public function get_all_city_list($search){        $where = "city_name LIKE '%" . $search . "%'";        $this->db->select('*');        $this->db->from('ace_jac_roomsxml_gta_city');        $this->db->where($where);        $this->db->where('status',1);        $this->db->order_by('city_name');        $query = $this->db->get();//echo $this->db->last_query();        if ($query->num_rows == '') {            return '';        } else {            return $query->result_array();        }    }public function get_all_city_list_new($search,$hotel_name) {        $where .= "city_name LIKE '%" . $hotel_name . "%' AND ";         $where .=  "`hotel_name` LIKE '%" . $search . "%'";        $this->db->select('*');        $this->db->from('api_permanent_hotels');        $this->db->where($where);        //$this->db->where('status',1);        $this->db->order_by('city_name');        $query = $this->db->get();//echo $this->db->last_query();        if ($query->num_rows == '') {            return '';        } else {            return $query->result_array();        }    }    public function update_all_city_list_new($data) {        $this->db->where('api_hotel_id',$data['api_hotel_id']);       // $this->db->where('hotel_name',$data['hotel_name']);        $value=array(            'hotel_name'=>$data['hotel_name']        );        $this->db->update('api_permanent_hotels',$value);       redirect("hotelduplication/searchcities","refresh");    }    public function get_matching_hotel($hotel_name,$city){        $this->db->select('*');        $this->db->from('api_permanent_hotels');        $this->db->like('hotel_name',$hotel_name);        //$this->db->where_in('city_code',$city);        $this->db->like('city_name',$city);        $this->db->order_by('hotel_name');        $this->db->where('api !=','roomsxml');        //$this->db->group_by('hotel_name_unique');        $query=$this->db->get();         if ($query->num_rows == '') {            return '';        } else {            return $query->result();        }    }     public function get_matching_hotelrooms($roomscity){        $this->db->select('*');        $this->db->from('api_permanent_hotels');        //$this->db->like('hotel_name',$hotel_name);        $this->db->where('city_code',$roomscity);        //$this->db->like('city_name',$city);        $this->db->order_by('hotel_name');        $this->db->where('api','roomsxml');        //$this->db->group_by('hotel_name_unique');        $query=$this->db->get();         if ($query->num_rows == '') {            return '';        } else {            return $query->result();        }    }    public function getcitycodes(){        $this->db->select('*');        $this->db->from('ace_jac_roomsxml_gta_city');        $this->db->where('id',$this->session->userdata('citycoderooms'));        $this->db->where('status',1);        $query = $this->db->get();//echo $this->db->last_query();        if ($query->num_rows == '') {            return '';        } else {            return $query->row();        }    }       public function updatehotel($id){        $this->db->select('hotel_name_unique');        $this->db->from('api_permanent_hotels');        $this->db->where('api_hotel_id',$id);        $query=$this->db->get();        $res=$query->row();        $res->hotel_name_unique;//echo '<pre>';print_r($_POST);//echo count($_POST);        for($i=0;$i<count($_POST['hotel_name']);$i++){            $this->db->where('api_hotel_id',$_POST['hotel_name'][$i]);            $data=array('hotel_name_unique'=>$res->hotel_name_unique);            $this->db->update('api_permanent_hotels',$data);            //echo '<br>'.$this->db->last_query();        }        //exit;    }    public function gethotelname($id){        $this->db->select('*');        $this->db->from('api_permanent_hotels');        $this->db->where('api_hotel_id',$id);               $query = $this->db->get();//echo $this->db->last_query();        if ($query->num_rows == '') {            return '';        } else {            return $query->row();        }    }	/*public function get_data($api_hotel_id)	{		$this->db->select('*');        $this->db->from('api_permanent_hotels');		$this->db->where('api_hotel_id',$api_hotel_id);		$query=$this->db->get();        $res=$query->row();        return $res;	}*/    /*public function update_data($api_hotel_id,$data)	{		$this->db->where('api_hotel_id',$api_hotel_id);		$this->db->update('api_permanent_hotels',$data);	}*/	public function get_datas($api_hotel_id)	{		$this->db->select('*');        $this->db->from('api_permanent_hotels');		$this->db->where('api_hotel_id',$api_hotel_id);		$query=$this->db->get();        $res=$query->row();        return $res;	}	public function update_data($api_hotel_id,$data)	{		$this->db->where('api_hotel_id',$api_hotel_id);		$this->db->update('api_permanent_hotels',$data);	}}